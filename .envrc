#!/usr/bin/env bash

export DIRENV_WARN_TIMEOUT=20s

eval "$(devenv direnvrc)"

use devenv

# Auto-pull on directory enter (backgrounded)
(
  git fetch --quiet 2>/dev/null
  behind=$(git rev-list --count HEAD..@{u} 2>/dev/null)
  if [[ "$behind" -gt 0 ]] 2>/dev/null; then
    if [[ -z "$(git status --porcelain 2>/dev/null)" ]]; then
      git pull --quiet
    fi
  fi
) &>/dev/null &
